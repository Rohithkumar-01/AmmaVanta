<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AmmaVanta | South Indian</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Poppins', sans-serif; }
  </style>
</head>

<body class="relative min-h-screen bg-gradient-to-br from-green-50 via-emerald-100 to-green-200">

<!-- ğŸŒ¿ BACKGROUND DECOR -->
<div class="absolute inset-0 -z-10
  bg-[radial-gradient(circle_at_top_left,rgba(16,185,129,0.25),transparent_45%),
      radial-gradient(circle_at_bottom_right,rgba(34,197,94,0.25),transparent_45%)]">
</div>

<!-- HEADER -->
<header class="flex justify-between items-center p-4 bg-white/80 backdrop-blur shadow sticky top-0 z-20">
  <h1 class="text-2xl font-bold text-green-700">South Indian Menu</h1>
  <a href="menu.html" class="text-green-600 hover:underline">â† Back</a>
</header>

<!-- FLOATING NAV -->
<div class="sticky top-16 bg-green-700 text-white flex justify-around py-3 z-10 shadow text-sm font-semibold">
  <button onclick="scrollToSection('tiffins')">ğŸ¥ Tiffins</button>
  <button onclick="scrollToSection('meals')">ğŸ½ Meals</button>
  <button onclick="scrollToSection('rice')">ğŸš Rice</button>
</div>

<section class="max-w-7xl mx-auto px-6 py-12 space-y-20">

  <!-- TIFFINS -->
  <div id="tiffins">
    <h2 class="text-xl font-bold text-gray-800 mb-4">
      ğŸ¥ Breakfast / Tiffins
    </h2>

    <div id="tiffinsList"
         class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-5"></div>
  </div>

  <!-- MEALS -->
  <div id="meals">
    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
      ğŸ½ Veg Meals & Thali
    </h2>

    <div id="mealsList"
         class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-5"></div>
  </div>

  <!-- RICE -->
  <div id="rice">
    <h2 class="text-xl font-bold text-gray-800 mb-4">
      ğŸš Rice Items
    </h2>

    <div id="riceList"
         class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-5"></div>
  </div>

</section>

<script>
const fallbackImage = "https://via.placeholder.com/300x200?text=No+Image";

function scrollToSection(id) {
  document.getElementById(id).scrollIntoView({ behavior: "smooth" });
}

function createCard(item) {
  const isThali = item.subCategory === "meals";

  const bgClass = isThali
    ? "bg-gradient-to-br from-emerald-50 to-green-100 border-green-200"
    : "bg-white";

  return `
    <div class="rounded-xl overflow-hidden
                ${bgClass}
                border shadow hover:shadow-lg transition">

      <!-- IMAGE -->
      <div class="bg-gray-50 flex justify-center items-center p-2">
        <img src="http://localhost:3000/uploads/${item.image || ''}"
             onerror="this.src='${fallbackImage}'"
             class="max-h-28 w-full object-contain">
      </div>

      <!-- TEXT -->
      <div class="px-3 py-2">
        <h3 class="text-sm font-semibold text-green-700 truncate">
          ${item.name} ğŸŒ±
        </h3>

        <div class="flex justify-between items-center mt-1">
          <span class="text-sm text-gray-700 font-medium">â‚¹${item.price}</span>
          <span class="text-xs text-yellow-500">${item.rating || ""}</span>
        </div>
      </div>

    </div>
  `;
}

// FETCH DATA FROM DB
fetch("http://localhost:3000/menu")
  .then(res => res.json())
  .then(items => {

    const southItems = items.filter(i => i.category === "south");

    southItems.forEach(item => {
      if (item.subCategory === "tiffins") {
        tiffinsList.innerHTML += createCard(item);
      }
      if (item.subCategory === "meals") {
        mealsList.innerHTML += createCard(item);
      }
      if (item.subCategory === "rice") {
        riceList.innerHTML += createCard(item);
      }
    });

  });
</script>

</body>
</html>
